{"remainingRequest":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue?vue&type=style&index=0&id=3fa10b42&lang=scss&scoped=true&","dependencies":[{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue","mtime":1540289763988},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/css-loader/index.js","mtime":1535964699815},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1538028549491},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/postcss-loader/lib/index.js","mtime":1535543586769},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/sass-loader/lib/loader.js","mtime":1536033857754},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js","mtime":1535964698825},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js","mtime":1538028549491}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.dialog {\n  position: absolute;\n  width: 500px;\n  height: 300px;\n  top: 0;\n  z-index: 1;\n  &::before {\n    content: '';\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    background-color: white;\n    z-index: 1;\n  }\n  &.left {\n    &::before {\n      right: 50px;\n    }\n  }\n  &.right {\n    &::before {\n      left: 50px;\n    }\n  }\n  &.top {\n    &::before {\n      bottom: 0;\n      box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\n    }\n  }\n  &.bottom {\n    &::before {\n      top: calc(20px - 8px / 2);\n      box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.1);\n    }\n  }\n}\n.container {\n  margin: 20px 0;\n  padding: 8px 0;\n  width: 100%;\n  border-radius: 3px;\n  height: calc(100% - 20px * 2);\n  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.1);\n  background-color: white;\n}\n",{"version":3,"sources":["Preview-Man.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Preview-Man.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div :class=\"['dialog',...position]\" v-if=\"html\" :style=\"{top:`${y}px`,left:`${x}px`}\" @click=\"click\">\n    <div class=\"container\">\n      <my-scrollbar>\n        <div class=\"content\" ref=\"content\" v-html=\"html\"></div>\n      </my-scrollbar>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport Vue from 'vue';\nimport { PreviewMan } from '@/store';\nimport scrollIntoView from 'smooth-scroll-into-view-if-needed';\nimport { waitImg } from '@/helper/wait-img';\nexport default Vue.extend({\n  data() {\n    return {\n      html: '',\n      position: [] as string[],\n      x: 0,\n      y: 0,\n    };\n  },\n  computed: {\n    man(): PreviewMan {\n      return this.$store.state.previewMan;\n    },\n  },\n  watch: {\n    man(val: PreviewMan) {\n      if (val) {\n        this.render(val.name).then(html => {\n          this.html = html;\n          this.position = [];\n          if (val.x > window.innerWidth / 2) {\n            this.position.push('left');\n            this.x = val.x - 500 + 50;\n          } else {\n            this.position.push('right');\n            this.x = val.x - 50;\n          }\n          if (val.y > window.innerHeight / 2) {\n            this.position.push('top');\n            this.y = val.y - 300 - 20;\n          } else {\n            this.position.push('bottom');\n            this.y = val.y;\n          }\n          if (val.heading) {\n            Vue.nextTick(() => {\n              const content = this.$refs.content as HTMLDivElement;\n              const hList = Array.from(content.querySelectorAll<HTMLHeadingElement>('h2,h3'));\n              const el = hList.find(heading => heading.innerText === val.heading);\n              if (el) {\n                waitImg(content).then(() => {\n                  scrollIntoView(el, { block: 'start' });\n                });\n              }\n            });\n          }\n        });\n      } else {\n        this.html = '';\n      }\n    },\n  },\n  methods: {\n    async render(name: string) {\n      const { html }: { html: string } = await this.$store.dispatch('renderApp', name);\n      return html;\n    },\n    click(e: MouseEvent) {\n      if (e.toElement.nodeName !== 'IMG') {\n        e.stopPropagation();\n      }\n    },\n  },\n});\n</script>\n<style lang=\"scss\" scoped>\n.dialog {\n  position: absolute;\n  width: 500px;\n  height: 300px;\n  top: 0;\n  z-index: 1;\n  &::before {\n    content: '';\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    background-color: white;\n    z-index: 1;\n  }\n  &.left {\n    &::before {\n      right: 50px;\n    }\n  }\n  &.right {\n    &::before {\n      left: 50px;\n    }\n  }\n  &.top {\n    &::before {\n      bottom: 0;\n      box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\n    }\n  }\n  &.bottom {\n    &::before {\n      top: calc(20px - 8px / 2);\n      box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.1);\n    }\n  }\n}\n.container {\n  margin: 20px 0;\n  padding: 8px 0;\n  width: 100%;\n  border-radius: 3px;\n  height: calc(100% - 20px * 2);\n  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.1);\n  background-color: white;\n}\n</style>\n\n"]}]}