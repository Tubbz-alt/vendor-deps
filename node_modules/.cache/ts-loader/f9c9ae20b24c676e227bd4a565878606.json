{"remainingRequest":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/thread-loader/dist/cjs.js!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/ts-loader/index.js??ref--13-2!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Scrollbar.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Scrollbar.vue","mtime":1540289763988},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js","mtime":1535964698825},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/thread-loader/dist/cjs.js","mtime":1535964700766},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/ts-loader/index.js","mtime":1535964694475},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js","mtime":1535964698825},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js","mtime":1538028549491}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport PerfectScrollbar from 'perfect-scrollbar';\nimport 'perfect-scrollbar/css/perfect-scrollbar.css';\nexport default Vue.extend({\n    props: {\n        // 以当前路由保存滚动位置信息\n        savePosition: Boolean,\n        // 为true时,以query参数细分位置信息\n        full: Boolean,\n    },\n    data: function () {\n        return {\n            interval: 0,\n        };\n    },\n    computed: {\n        saveKey: function () {\n            if (this.full) {\n                return this.$route.fullPath;\n            }\n            else {\n                return this.$route.path;\n            }\n        },\n        savedPosition: function () {\n            return this.$store.state.positions[this.saveKey];\n        },\n        container: function () {\n            return this.$refs.container;\n        },\n    },\n    watch: {\n        saveKey: function () {\n            this.loadPosition();\n        },\n    },\n    mounted: function () {\n        var el = this.container;\n        var scrollbar = new PerfectScrollbar(el, {\n            minScrollbarLength: 100,\n            wheelPropagation: false,\n        });\n        el.addEventListener('ps-scroll-x', this.scroll);\n        el.addEventListener('ps-scroll-y', this.scroll);\n        this.loadPosition();\n        this.interval = setInterval(function () {\n            scrollbar.update();\n        }, 300);\n    },\n    destroyed: function () {\n        clearInterval(this.interval);\n    },\n    methods: {\n        loadPosition: function () {\n            var _this = this;\n            window.requestIdleCallback(function () {\n                if (_this.savedPosition) {\n                    console.log(_this.saveKey, _this.savedPosition);\n                    _this.container.scrollTop = _this.savedPosition.y;\n                    _this.container.scrollLeft = _this.savedPosition.x;\n                }\n                else {\n                    _this.container.scrollTop = 0;\n                    _this.container.scrollLeft = 0;\n                }\n            });\n        },\n        scroll: function (e) {\n            this.$emit('scroll', e);\n            if (this.savePosition) {\n                var el = e.srcElement;\n                var position = {\n                    name: this.saveKey,\n                    x: el.scrollLeft,\n                    y: el.scrollTop,\n                };\n                this.$store.commit('savePosition', position);\n            }\n        },\n    },\n});\n",{"version":3,"file":"/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Scrollbar.vue.ts","sourceRoot":"","sources":["/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Scrollbar.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"AAQA,OAAO,GAAG,MAAM,KAAK,CAAC;AAEtB,OAAO,gBAAgB,MAAM,mBAAmB,CAAC;AAGjD,OAAO,6CAA6C,CAAC;AAErD,eAAe,GAAG,CAAC,MAAM,CAAC;IACxB,KAAK,EAAE;QACL,gBAAgB;QAChB,YAAY,EAAE,OAAO;QACrB,wBAAwB;QACxB,IAAI,EAAE,OAAO;KACd;IACD,IAAI;QACF,OAAO;YACL,QAAQ,EAAE,CAAC;SACZ,CAAC;IACJ,CAAC;IACD,QAAQ,EAAE;QACR,OAAO,EAAP;YACE,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;aAC7B;iBAAM;gBACL,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;aACzB;QACH,CAAC;QACD,aAAa,EAAb;YACE,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACnD,CAAC;QACD,SAAS,EAAT;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,SAAwB,CAAC;QAC7C,CAAC;KACF;IACD,KAAK,EAAE;QACL,OAAO;YACL,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;KACF;IACD,OAAO;QACL,IAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;QAC1B,IAAM,SAAS,GAAG,IAAI,gBAAgB,CAAC,EAAE,EAAE;YACzC,kBAAkB,EAAE,GAAG;YACvB,gBAAgB,EAAE,KAAK;SACxB,CAAC,CAAC;QACH,EAAE,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAChD,EAAE,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;YAC1B,SAAS,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,SAAS;QACP,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IACD,OAAO,EAAE;QACP,YAAY;YAAZ,iBAWC;YAVC,MAAM,CAAC,mBAAmB,CAAC;gBACzB,IAAI,KAAI,CAAC,aAAa,EAAE;oBACtB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,aAAa,CAAC,CAAC;oBAC9C,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;oBAChD,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;iBAClD;qBAAM;oBACL,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,CAAC,CAAC;oBAC7B,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC;iBAC/B;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,MAAM,YAAC,CAAQ;YACb,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YACxB,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAM,EAAE,GAAG,CAAC,CAAC,UAA4B,CAAC;gBAC1C,IAAM,QAAQ,GAAG;oBACf,IAAI,EAAE,IAAI,CAAC,OAAO;oBAClB,CAAC,EAAE,EAAE,CAAC,UAAU;oBAChB,CAAC,EAAE,EAAE,CAAC,SAAS;iBAChB,CAAC;gBACF,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;aAC9C;QACH,CAAC;KACF;CACF,CAAC,CAAC","sourcesContent":["\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport scrollIntoView from 'smooth-scroll-into-view-if-needed';\nimport PerfectScrollbar from 'perfect-scrollbar';\nimport { debounce } from 'lodash';\n\nimport 'perfect-scrollbar/css/perfect-scrollbar.css';\n\nexport default Vue.extend({\n  props: {\n    // 以当前路由保存滚动位置信息\n    savePosition: Boolean,\n    // 为true时,以query参数细分位置信息\n    full: Boolean,\n  },\n  data() {\n    return {\n      interval: 0,\n    };\n  },\n  computed: {\n    saveKey(): string {\n      if (this.full) {\n        return this.$route.fullPath;\n      } else {\n        return this.$route.path;\n      }\n    },\n    savedPosition(): { x: number; y: number } {\n      return this.$store.state.positions[this.saveKey];\n    },\n    container(): HTMLElement {\n      return this.$refs.container as HTMLElement;\n    },\n  },\n  watch: {\n    saveKey() {\n      this.loadPosition();\n    },\n  },\n  mounted() {\n    const el = this.container;\n    const scrollbar = new PerfectScrollbar(el, {\n      minScrollbarLength: 100,\n      wheelPropagation: false,\n    });\n    el.addEventListener('ps-scroll-x', this.scroll);\n    el.addEventListener('ps-scroll-y', this.scroll);\n    this.loadPosition();\n    this.interval = setInterval(() => {\n      scrollbar.update();\n    }, 300);\n  },\n  destroyed() {\n    clearInterval(this.interval);\n  },\n  methods: {\n    loadPosition() {\n      window.requestIdleCallback(() => {\n        if (this.savedPosition) {\n          console.log(this.saveKey, this.savedPosition);\n          this.container.scrollTop = this.savedPosition.y;\n          this.container.scrollLeft = this.savedPosition.x;\n        } else {\n          this.container.scrollTop = 0;\n          this.container.scrollLeft = 0;\n        }\n      });\n    },\n    scroll(e: Event) {\n      this.$emit('scroll', e);\n      if (this.savePosition) {\n        const el = e.srcElement as HTMLDivElement;\n        const position = {\n          name: this.saveKey,\n          x: el.scrollLeft,\n          y: el.scrollTop,\n        };\n        this.$store.commit('savePosition', position);\n      }\n    },\n  },\n});\n"]}]}