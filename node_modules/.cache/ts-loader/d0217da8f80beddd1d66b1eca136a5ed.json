{"remainingRequest":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/ts-loader/index.js??ref--13-1!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue","mtime":1540289763988},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js","mtime":1535964698825},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/ts-loader/index.js","mtime":1535964694475},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js","mtime":1535964698825},{"path":"/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js","mtime":1538028549491}],"contextDependencies":[],"result":["import * as tslib_1 from \"tslib\";\nimport Vue from 'vue';\nimport scrollIntoView from 'smooth-scroll-into-view-if-needed';\nimport { waitImg } from '@/helper/wait-img';\nexport default Vue.extend({\n    data: function () {\n        return {\n            html: '',\n            position: [],\n            x: 0,\n            y: 0,\n        };\n    },\n    computed: {\n        man: function () {\n            return this.$store.state.previewMan;\n        },\n    },\n    watch: {\n        man: function (val) {\n            var _this = this;\n            if (val) {\n                this.render(val.name).then(function (html) {\n                    _this.html = html;\n                    _this.position = [];\n                    if (val.x > window.innerWidth / 2) {\n                        _this.position.push('left');\n                        _this.x = val.x - 500 + 50;\n                    }\n                    else {\n                        _this.position.push('right');\n                        _this.x = val.x - 50;\n                    }\n                    if (val.y > window.innerHeight / 2) {\n                        _this.position.push('top');\n                        _this.y = val.y - 300 - 20;\n                    }\n                    else {\n                        _this.position.push('bottom');\n                        _this.y = val.y;\n                    }\n                    if (val.heading) {\n                        Vue.nextTick(function () {\n                            var content = _this.$refs.content;\n                            var hList = Array.from(content.querySelectorAll('h2,h3'));\n                            var el = hList.find(function (heading) { return heading.innerText === val.heading; });\n                            if (el) {\n                                waitImg(content).then(function () {\n                                    scrollIntoView(el, { block: 'start' });\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n            else {\n                this.html = '';\n            }\n        },\n    },\n    methods: {\n        render: function (name) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var html;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.$store.dispatch('renderApp', name)];\n                        case 1:\n                            html = (_a.sent()).html;\n                            return [2 /*return*/, html];\n                    }\n                });\n            });\n        },\n        click: function (e) {\n            if (e.toElement.nodeName !== 'IMG') {\n                e.stopPropagation();\n            }\n        },\n    },\n});\n",{"version":3,"file":"/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue.ts","sourceRoot":"","sources":["/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/myml/Src/deepin/deepin-manual/src/manual-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/myml/Src/deepin/deepin-manual/src/manual-web/src/components/Preview-Man.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { PreviewMan } from '@/store';\nimport scrollIntoView from 'smooth-scroll-into-view-if-needed';\nimport { waitImg } from '@/helper/wait-img';\nexport default Vue.extend({\n  data() {\n    return {\n      html: '',\n      position: [] as string[],\n      x: 0,\n      y: 0,\n    };\n  },\n  computed: {\n    man(): PreviewMan {\n      return this.$store.state.previewMan;\n    },\n  },\n  watch: {\n    man(val: PreviewMan) {\n      if (val) {\n        this.render(val.name).then(html => {\n          this.html = html;\n          this.position = [];\n          if (val.x > window.innerWidth / 2) {\n            this.position.push('left');\n            this.x = val.x - 500 + 50;\n          } else {\n            this.position.push('right');\n            this.x = val.x - 50;\n          }\n          if (val.y > window.innerHeight / 2) {\n            this.position.push('top');\n            this.y = val.y - 300 - 20;\n          } else {\n            this.position.push('bottom');\n            this.y = val.y;\n          }\n          if (val.heading) {\n            Vue.nextTick(() => {\n              const content = this.$refs.content as HTMLDivElement;\n              const hList = Array.from(content.querySelectorAll<HTMLHeadingElement>('h2,h3'));\n              const el = hList.find(heading => heading.innerText === val.heading);\n              if (el) {\n                waitImg(content).then(() => {\n                  scrollIntoView(el, { block: 'start' });\n                });\n              }\n            });\n          }\n        });\n      } else {\n        this.html = '';\n      }\n    },\n  },\n  methods: {\n    async render(name: string) {\n      const { html }: { html: string } = await this.$store.dispatch('renderApp', name);\n      return html;\n    },\n    click(e: MouseEvent) {\n      if (e.toElement.nodeName !== 'IMG') {\n        e.stopPropagation();\n      }\n    },\n  },\n});\n"]}]}